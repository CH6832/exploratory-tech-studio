#!/bin/sh
# ----------------------------------------------------------------------------
# Maven Wrapper Script
# This script is used to run the Maven Wrapper, which allows users to
# execute Maven commands without needing to install Maven globally.
# It ensures that the correct version of Maven is used for the project.
# ----------------------------------------------------------------------------

# Ensure we are running this script with a suitable version of bash
# This check verifies if the script is executed in a bash environment.
# If not, an error message is displayed, and the script exits with a status code of 1.
if [ -z "$BASH_VERSION" ]; then
    echo "Maven Wrapper requires bash to run. Please install bash."
    exit 1
fi

# Wrapper script version
# This variable holds the version of the Maven Wrapper that is expected.
WRAPPER_VERSION="3.8.4"

# Define paths
# 'DIR' gets the directory of the script being executed.
# 'MAVEN_WRAPPER_JAR' is the path to the Maven Wrapper JAR file, which is
# responsible for running Maven.
# 'MAVEN_WRAPPER_PROPERTIES' is the path to the properties file that
# contains configuration for the Maven Wrapper.
DIR="$(cd "$(dirname "$0")" && pwd)"
MAVEN_WRAPPER_JAR="$DIR/.mvn/wrapper/maven-wrapper.jar"
MAVEN_WRAPPER_PROPERTIES="$DIR/.mvn/wrapper/maven-wrapper.properties"

# Check if the wrapper jar exists
# This conditional checks for the existence of the Maven Wrapper JAR file.
# If the file is not found, an error message is displayed, instructing the user
# to run the 'mvn wrapper:wrapper' command to generate the necessary files.
if [ ! -f "$MAVEN_WRAPPER_JAR" ]; then
    echo "Maven Wrapper JAR not found. Please ensure you have run 'mvn wrapper:wrapper' in your project."
    exit 1
fi

# Execute the Maven Wrapper
# This command runs the Java Virtual Machine (JVM) and executes the Maven
# Wrapper Main class, passing along any arguments that were provided to
# this script. The `-cp` flag sets the classpath to include the Maven Wrapper JAR.
exec java -cp "$MAVEN_WRAPPER_JAR" org.apache.maven.wrapper.MavenWrapperMain "$@"
